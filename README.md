# MacJarvis - macOS æ™ºèƒ½åŠ©æ‰‹

<div align="center">

![MacJarvis](https://img.shields.io/badge/MacJarvis-AI%20Assistant-blue)
![Python](https://img.shields.io/badge/Python-3.12+-green)
![FastAPI](https://img.shields.io/badge/FastAPI-0.115+-green)
![React](https://img.shields.io/badge/React-19.2+-blue)
![License](https://img.shields.io/badge/License-MIT-yellow)

**ä¸€ä¸ªåŸºäº AI çš„ macOS æ™ºèƒ½åŠ©æ‰‹ç³»ç»Ÿï¼Œé€šè¿‡è‡ªç„¶è¯­è¨€äº¤äº’å¸®åŠ©ç”¨æˆ·ç®¡ç†ç³»ç»Ÿã€æ‰§è¡Œä»»åŠ¡ã€æ’æŸ¥é—®é¢˜**

[åŠŸèƒ½ç‰¹æ€§](#-åŠŸèƒ½ç‰¹æ€§) â€¢ [å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹) â€¢ [æ¶æ„è®¾è®¡](#-æ¶æ„è®¾è®¡) â€¢ [API æ–‡æ¡£](#-api-æ–‡æ¡£) â€¢ [å¼€å‘æŒ‡å—](#-å¼€å‘æŒ‡å—)

</div>

---

## ğŸ“‹ ç›®å½•

- [é¡¹ç›®ç®€ä»‹](#-é¡¹ç›®ç®€ä»‹)
- [åŠŸèƒ½ç‰¹æ€§](#-åŠŸèƒ½ç‰¹æ€§)
- [æŠ€æœ¯æ ˆ](#-æŠ€æœ¯æ ˆ)
- [é¡¹ç›®ç»“æ„](#-é¡¹ç›®ç»“æ„)
- [å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹)
- [é…ç½®è¯´æ˜](#-é…ç½®è¯´æ˜)
- [æ¶æ„è®¾è®¡](#-æ¶æ„è®¾è®¡)
- [API æ–‡æ¡£](#-api-æ–‡æ¡£)
- [å¼€å‘æŒ‡å—](#-å¼€å‘æŒ‡å—)
- [éƒ¨ç½²æŒ‡å—](#-éƒ¨ç½²æŒ‡å—)
- [æ•…éšœæ’æŸ¥](#-æ•…éšœæ’æŸ¥)
- [å®‰å…¨æ³¨æ„äº‹é¡¹](#-å®‰å…¨æ³¨æ„äº‹é¡¹)
- [è´¡çŒ®æŒ‡å—](#-è´¡çŒ®æŒ‡å—)
- [æ›´æ–°æ—¥å¿—](#-æ›´æ–°æ—¥å¿—)

---

## ğŸ¯ é¡¹ç›®ç®€ä»‹

MacJarvis æ˜¯ä¸€ä¸ªæ™ºèƒ½åŒ–çš„ macOS ç³»ç»Ÿç®¡ç†åŠ©æ‰‹ï¼Œé€šè¿‡è‡ªç„¶è¯­è¨€å¯¹è¯çš„æ–¹å¼ï¼Œå¸®åŠ©ç”¨æˆ·ï¼š

- ğŸ” **ç³»ç»Ÿç›‘æ§**ï¼šå®æ—¶æŸ¥çœ‹ç³»ç»ŸçŠ¶æ€ã€è¿›ç¨‹ä¿¡æ¯ã€èµ„æºä½¿ç”¨æƒ…å†µ
- ğŸ“ **æ–‡ä»¶ç®¡ç†**ï¼šæ™ºèƒ½æœç´¢ã€è¯»å–ã€åˆ›å»ºã€ç®¡ç†æ–‡ä»¶å’Œç›®å½•
- ğŸŒ **ç½‘ç»œè¯Šæ–­**ï¼šæ£€æŸ¥ç½‘ç»œé…ç½®ã€ç«¯å£çŠ¶æ€ã€DNS è®¾ç½®
- ğŸš€ **åº”ç”¨ç®¡ç†**ï¼šå¿«é€Ÿå¯åŠ¨åº”ç”¨ã€ç®¡ç†å·²å®‰è£…ç¨‹åº
- ğŸ¤– **æ™ºèƒ½å¯¹è¯**ï¼šæ”¯æŒå¤šæ¨¡å‹åˆ‡æ¢ï¼Œæä¾›æµç•…çš„å¯¹è¯ä½“éªŒ

ç³»ç»Ÿé‡‡ç”¨å‰åç«¯åˆ†ç¦»æ¶æ„ï¼Œæ”¯æŒæµå¼å“åº”å’Œå®æ—¶å·¥å…·è°ƒç”¨æ˜¾ç¤ºï¼Œæä¾›ç°ä»£åŒ–çš„ Web ç•Œé¢å’Œå®Œæ•´çš„ Docker å®¹å™¨åŒ–éƒ¨ç½²æ–¹æ¡ˆã€‚

---

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### ğŸ¤– å¤šæ¨¡å‹æ”¯æŒ

ç³»ç»Ÿæ”¯æŒå¤šç§ä¸»æµ AI æ¨¡å‹ï¼Œå¯æ ¹æ®éœ€æ±‚çµæ´»åˆ‡æ¢ï¼š

- **OpenAI GPT-4o-mini**: å¿«é€Ÿå“åº”ï¼Œé€‚åˆæ—¥å¸¸ä»»åŠ¡ï¼Œæˆæœ¬æ•ˆç›Šé«˜
- **Anthropic Claude Haiku 4.5**: é«˜æ•ˆæ¨ç†ï¼Œæˆæœ¬ä¼˜åŒ–ï¼Œé€‚åˆå¤æ‚ä»»åŠ¡
- **Google Gemini 2.5 Flash**: å¤šæ¨¡æ€èƒ½åŠ›ï¼Œå¿«é€Ÿå¤„ç†ï¼Œé€‚åˆå¤§è§„æ¨¡ä»»åŠ¡

æ‰€æœ‰æ¨¡å‹é€šè¿‡ OpenRouter API ç»Ÿä¸€æ¥å…¥ï¼Œæ”¯æŒä¸€é”®åˆ‡æ¢ã€‚

### ğŸ› ï¸ ä¸°å¯Œçš„ç³»ç»Ÿå·¥å…·

#### ç³»ç»Ÿä¿¡æ¯
- **ç³»ç»Ÿç‰ˆæœ¬ä¿¡æ¯**ï¼šmacOS ç‰ˆæœ¬ã€å†…æ ¸ç‰ˆæœ¬ã€ç¡¬ä»¶ä¿¡æ¯
- **CPU å’Œå†…å­˜ç›‘æ§**ï¼šå®æ—¶æŸ¥çœ‹ CPU ä½¿ç”¨ç‡ã€å†…å­˜å ç”¨æƒ…å†µ
- **è¿›ç¨‹ç®¡ç†**ï¼šæŒ‰ CPU/å†…å­˜æ’åºæŸ¥çœ‹è¿›ç¨‹ï¼Œæ”¯æŒé™åˆ¶æ˜¾ç¤ºæ•°é‡
- **ç£ç›˜ç©ºé—´**ï¼šæŸ¥çœ‹ç£ç›˜ä½¿ç”¨æƒ…å†µï¼Œå®šä½å¤§æ–‡ä»¶
- **ç”µæ± çŠ¶æ€**ï¼šæŸ¥çœ‹ç”µæ± å¥åº·åº¦å’Œç”µæºè®¾ç½®

#### æ–‡ä»¶ç®¡ç†
- **ç›®å½•æµè§ˆ**ï¼šåˆ—å‡ºç›®å½•å†…å®¹ï¼Œæ”¯æŒé€’å½’æŸ¥çœ‹
- **æ–‡ä»¶æœç´¢**ï¼šæŒ‰é€šé…ç¬¦æ¨¡å¼æœç´¢æ–‡ä»¶ï¼Œæ”¯æŒé™åˆ¶ç»“æœæ•°é‡
- **æ–‡ä»¶è¯»å–**ï¼šè¯»å–æ–‡ä»¶å†…å®¹ï¼Œæ”¯æŒå¤§å°é™åˆ¶ï¼ˆé˜²æ­¢å†…å­˜æº¢å‡ºï¼‰
- **æ–‡ä»¶å†™å…¥**ï¼šåˆ›å»ºæˆ–è¦†ç›–æ–‡ä»¶ï¼Œæ”¯æŒå†…å®¹éªŒè¯
- **æ–‡ä»¶è¿½åŠ **ï¼šè¿½åŠ å†…å®¹åˆ°æ–‡ä»¶ï¼Œæ”¯æŒè‡ªåŠ¨åˆ›å»º
- **ç›®å½•åˆ›å»º**ï¼šåˆ›å»ºç›®å½•ç»“æ„ï¼Œæ”¯æŒé€’å½’åˆ›å»º
- **æ–‡ä»¶ä¿¡æ¯**ï¼šè·å–æ–‡ä»¶/ç›®å½•çš„è¯¦ç»†ä¿¡æ¯ï¼ˆå¤§å°ã€æƒé™ã€ä¿®æ”¹æ—¶é—´ç­‰ï¼‰
- **æ–‡æœ¬æœç´¢**ï¼šåœ¨æ–‡ä»¶ä¸­æœç´¢æ–‡æœ¬å†…å®¹ï¼ˆgrep åŠŸèƒ½ï¼‰
- **æ–‡ä»¶åˆ é™¤**ï¼šå®‰å…¨åˆ é™¤æ–‡ä»¶åˆ°å›æ”¶ç«™

#### ç½‘ç»œå·¥å…·
- **ç½‘ç»œæ¥å£**ï¼šæŸ¥çœ‹æ‰€æœ‰ç½‘ç»œæ¥å£é…ç½®
- **DNS é…ç½®**ï¼šæŸ¥çœ‹ç³»ç»Ÿ DNS è®¾ç½®
- **Wi-Fi ä¿¡æ¯**ï¼šæŸ¥çœ‹å½“å‰ Wi-Fi è¿æ¥çŠ¶æ€
- **ç«¯å£ç›‘å¬**ï¼šæŸ¥çœ‹ç³»ç»Ÿç›‘å¬çš„ç«¯å£åˆ—è¡¨

#### åº”ç”¨ç®¡ç†
- **åº”ç”¨åˆ—è¡¨**ï¼šåˆ—å‡ºæ‰€æœ‰å·²å®‰è£…çš„åº”ç”¨ç¨‹åº
- **åº”ç”¨å¯åŠ¨**ï¼šæ‰“å¼€æŒ‡å®šçš„åº”ç”¨ç¨‹åº
- **æµè§ˆå™¨æ‰“å¼€**ï¼šåœ¨é»˜è®¤æµè§ˆå™¨ä¸­æ‰“å¼€ URL

### ğŸ”’ å®‰å…¨ç‰¹æ€§

- **è·¯å¾„è®¿é—®é™åˆ¶**ï¼šä»…å…è®¸è®¿é—®ç”¨æˆ·ç›®å½•ï¼ˆ`~/`, `~/Desktop`, `~/Documents`, `~/Downloads`ï¼‰
- **æ–‡ä»¶å¤§å°é™åˆ¶**ï¼šè¯»å–æ–‡ä»¶é™åˆ¶æœ€å¤§ 50KBï¼Œå†™å…¥æ–‡ä»¶é™åˆ¶æœ€å¤§ 100KB
- **å‘½ä»¤æ‰§è¡Œè¶…æ—¶**ï¼šæ‰€æœ‰å‘½ä»¤æ‰§è¡Œéƒ½æœ‰è¶…æ—¶ä¿æŠ¤ï¼ˆé»˜è®¤ 30 ç§’ï¼‰
- **è¾“å…¥éªŒè¯**ï¼šä¸¥æ ¼çš„å‚æ•°éªŒè¯å’Œé”™è¯¯å¤„ç†
- **é”™è¯¯éš”ç¦»**ï¼šå·¥å…·æ‰§è¡Œé”™è¯¯ä¸ä¼šå½±å“æ•´ä¸ªç³»ç»Ÿ

### ğŸ’¬ ç”¨æˆ·ä½“éªŒ

- **æµå¼å“åº”**ï¼šå®æ—¶æ˜¾ç¤º AI å›å¤å†…å®¹ï¼Œæ— éœ€ç­‰å¾…
- **å·¥å…·è°ƒç”¨å¯è§†åŒ–**ï¼šå®æ—¶æ˜¾ç¤ºå·¥å…·è°ƒç”¨è¿‡ç¨‹å’Œç»“æœ
- **Markdown æ”¯æŒ**ï¼šAI å›å¤æ”¯æŒ Markdown æ ¼å¼æ¸²æŸ“
- **å¤šä¼šè¯ç®¡ç†**ï¼šæ”¯æŒåˆ›å»ºå¤šä¸ªä¼šè¯å¹¶å¿«é€Ÿåˆ‡æ¢
- **é™„ä»¶æ”¯æŒ**ï¼šæ”¯æŒä¸Šä¼ å›¾ç‰‡/æ–‡æ¡£å¹¶ä½œä¸ºå¯¹è¯ä¸Šä¸‹æ–‡
- **ä¸Šä¸‹æ–‡å¢å¼º**ï¼šä¼šè¯æ‘˜è¦ä¸è®°å¿†æ£€ç´¢å¢å¼ºé•¿å¯¹è¯ä½“éªŒ
- **ç”¨æˆ·æ ‡è¯†**ï¼šæ¯æ¬¡è¿›å…¥è‡ªåŠ¨ç”Ÿæˆå”¯ä¸€ç”¨æˆ· IDï¼Œç”¨äºåŒºåˆ†ä¼šè¯
- **å“åº”å¼è®¾è®¡**ï¼šæ”¯æŒæ¡Œé¢å’Œç§»åŠ¨ç«¯è®¿é—®
- **é”™è¯¯æç¤º**ï¼šå‹å¥½çš„é”™è¯¯æç¤ºå’Œå¼‚å¸¸å¤„ç†

---

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### åç«¯
- **Python 3.12+**: ç°ä»£ Python ç‰¹æ€§æ”¯æŒ
- **FastAPI**: é«˜æ€§èƒ½å¼‚æ­¥ Web æ¡†æ¶
- **Uvicorn**: ASGI æœåŠ¡å™¨
- **httpx**: å¼‚æ­¥ HTTP å®¢æˆ·ç«¯
- **Pydantic**: æ•°æ®éªŒè¯å’Œåºåˆ—åŒ–

### å‰ç«¯
- **React 19.2**: æœ€æ–°ç‰ˆæœ¬çš„ React æ¡†æ¶
- **TypeScript**: ç±»å‹å®‰å…¨çš„ JavaScript
- **Vite**: å¿«é€Ÿçš„å‰ç«¯æ„å»ºå·¥å…·
- **Tailwind CSS**: å®ç”¨ä¼˜å…ˆçš„ CSS æ¡†æ¶
- **React Markdown**: Markdown æ¸²æŸ“ç»„ä»¶
- **Server-Sent Events (SSE)**: æµå¼æ•°æ®ä¼ è¾“

### éƒ¨ç½²
- **Docker**: å®¹å™¨åŒ–éƒ¨ç½²
- **Docker Compose**: å¤šå®¹å™¨ç¼–æ’
- **Nginx**: åå‘ä»£ç†å’Œé™æ€æ–‡ä»¶æœåŠ¡

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
mac_agent/
â”œâ”€â”€ backend/                      # åç«¯æºä»£ç 
â”‚   â”œâ”€â”€ agent/                    # æ™ºèƒ½ä½“æ ¸å¿ƒæ¨¡å—
â”‚   â”‚   â”œâ”€â”€ core/                # æ ¸å¿ƒç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ agent.py         # Agent ä¸»ç±»ï¼ˆæµå¼å¤„ç†ã€å·¥å…·è°ƒç”¨ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ client.py        # OpenAI API å®¢æˆ·ç«¯å°è£…
â”‚   â”‚   â”‚   â””â”€â”€ config.py        # é…ç½®ç®¡ç†å’Œæ¨¡å‹éªŒè¯
â”‚   â”‚   â”œâ”€â”€ memory/              # è®°å¿†ç³»ç»Ÿï¼ˆçŸ­æœŸ/æƒ…æ™¯/è¯­ä¹‰ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ manager.py       # è®°å¿†ç¼–æ’ä¸ä¸Šä¸‹æ–‡æ„å»º
â”‚   â”‚   â”‚   â””â”€â”€ store.py         # è®°å¿†å­˜å‚¨å®ç°
â”‚   â”‚   â”œâ”€â”€ tools/               # å·¥å…·æ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ base.py          # å·¥å…·åŸºç±»å®šä¹‰
â”‚   â”‚   â”‚   â”œâ”€â”€ registry.py      # å·¥å…·æ³¨å†Œè¡¨å’Œç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ mac_tools.py     # macOS ç³»ç»Ÿå·¥å…·é›†ï¼ˆ20+ å·¥å…·ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ command_runner.py # å‘½ä»¤æ‰§è¡Œå™¨ï¼ˆè¶…æ—¶æ§åˆ¶ï¼‰
â”‚   â”‚   â”‚   â””â”€â”€ validators.py    # è·¯å¾„éªŒè¯å’Œå®‰å…¨æ£€æŸ¥
â”‚   â”‚   â””â”€â”€ app.py               # CLI å…¥å£ï¼ˆå‘½ä»¤è¡Œå·¥å…·ï¼‰
â”‚   â””â”€â”€ server/                  # FastAPI æœåŠ¡å™¨
â”‚       â””â”€â”€ app.py               # API æœåŠ¡å™¨ï¼ˆSSE æµå¼å“åº”ï¼‰
â”œâ”€â”€ frontend/                    # å‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ App.tsx             # ä¸»åº”ç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ components/         # UI ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ ChatMessage.tsx # èŠå¤©æ¶ˆæ¯ç»„ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ ToolCallDisplay.tsx # å·¥å…·è°ƒç”¨æ˜¾ç¤ºç»„ä»¶
â”‚   â”‚   â””â”€â”€ types.ts            # TypeScript ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ package.json            # å‰ç«¯ä¾èµ–é…ç½®
â”‚   â””â”€â”€ vite.config.ts          # Vite æ„å»ºé…ç½®
â”œâ”€â”€ docker-compose.yml          # Docker Compose é…ç½®
â”œâ”€â”€ Dockerfile.backend          # åç«¯é•œåƒæ„å»ºæ–‡ä»¶
â”œâ”€â”€ Dockerfile.frontend         # å‰ç«¯é•œåƒæ„å»ºæ–‡ä»¶
â”œâ”€â”€ nginx.conf                  # Nginx é…ç½®æ–‡ä»¶
â”œâ”€â”€ requirements.txt            # Python ä¾èµ–
â”œâ”€â”€ .env.example                # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â””â”€â”€ README.md                   # é¡¹ç›®æ–‡æ¡£
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- **Python**: 3.12 æˆ–æ›´é«˜ç‰ˆæœ¬
- **Node.js**: 18 æˆ–æ›´é«˜ç‰ˆæœ¬
- **Docker & Docker Compose**: å¯é€‰ï¼Œç”¨äºå®¹å™¨åŒ–éƒ¨ç½²
- **macOS**: ç³»ç»Ÿå·¥å…·ä»…æ”¯æŒ macOSï¼ˆå…¶ä»–ç³»ç»Ÿå¯ä¿®æ”¹å·¥å…·å®ç°ï¼‰

### æ–¹å¼ä¸€ï¼šæœ¬åœ°å¼€å‘

#### 1. å…‹éš†é¡¹ç›®

```bash
git clone git@github.com:JNUZXF/MacJarvis.git
cd MacJarvis
```

#### 2. åç«¯è®¾ç½®

```bash
# è¿›å…¥åç«¯ç›®å½•
cd backend

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python3 -m venv .venv
source .venv/bin/activate  # macOS/Linux
# æˆ–
.venv\Scripts\activate  # Windows

# å®‰è£…ä¾èµ–
pip install -r ../requirements.txt

# é…ç½®ç¯å¢ƒå˜é‡
cd ..
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œå¡«å…¥ä½ çš„ API Key
```

#### 3. å‰ç«¯è®¾ç½®

```bash
cd frontend
npm install
```

#### 4. å¯åŠ¨æœåŠ¡

**å¯åŠ¨åç«¯æœåŠ¡**ï¼ˆåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼‰ï¼š

```bash
cd backend
source .venv/bin/activate
cd server
python app.py
# æˆ–ä½¿ç”¨ uvicornï¼ˆæ¨èï¼Œæ”¯æŒçƒ­é‡è½½ï¼‰
uvicorn app:app --host 0.0.0.0 --port 8000 --reload
```

åç«¯æœåŠ¡å°†åœ¨ `http://localhost:8000` å¯åŠ¨ã€‚

**å¯åŠ¨å‰ç«¯æœåŠ¡**ï¼ˆåœ¨ `frontend` ç›®å½•ä¸‹ï¼‰ï¼š

```bash
cd frontend
npm run dev
```

å‰ç«¯æœåŠ¡å°†åœ¨ `http://localhost:5173` å¯åŠ¨ã€‚

è®¿é—® `http://localhost:5173` å³å¯ä½¿ç”¨åº”ç”¨ã€‚

å¦‚éœ€åœ¨æœ¬åœ°ç›´è¿åç«¯ï¼ˆä¸ç»è¿‡ nginx ä»£ç†ï¼‰ï¼Œè¯·åœ¨å¯åŠ¨å‰è®¾ç½®ï¼š
```bash
export VITE_API_URL=http://localhost:8000
```

### æ–¹å¼äºŒï¼šDocker éƒ¨ç½²ï¼ˆæ¨èï¼‰

#### ä½¿ç”¨ Docker Compose

```bash
# 1. é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œå¡«å…¥ä½ çš„ API Key

# 2. å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker compose -f docker-compose.yml up -d --build

# 3. æŸ¥çœ‹æ—¥å¿—
docker compose -f docker-compose.yml logs -f

# 4. åœæ­¢æœåŠ¡
docker compose -f docker-compose.yml down
```

æœåŠ¡å¯åŠ¨åï¼š
- å‰ç«¯è®¿é—®ï¼š`http://localhost:8080`
- åç«¯ APIï¼š`http://localhost:8001`
- API æ–‡æ¡£ï¼š`http://localhost:8001/docs`

#### æ‰‹åŠ¨æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºåç«¯é•œåƒ
docker build -t macjarvis-backend -f Dockerfile.backend .

# æ„å»ºå‰ç«¯é•œåƒ
docker build -t macjarvis-frontend -f Dockerfile.frontend .

# è¿è¡Œåç«¯
docker run -d --name backend \
  -p 8001:8000 \
  --env-file .env \
  macjarvis-backend

# è¿è¡Œå‰ç«¯
docker run -d --name frontend \
  -p 8080:80 \
  --link backend:backend \
  macjarvis-frontend
```

---

## âš™ï¸ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡

åˆ›å»º `.env` æ–‡ä»¶å¹¶é…ç½®ä»¥ä¸‹å˜é‡ï¼š

```bash
# API é…ç½®ï¼ˆæ¨èä½¿ç”¨ OpenRouterï¼‰
OPENAI_API_KEY=your_api_key_here
OPENAI_BASE_URL=https://openrouter.ai/api/v1
OPENAI_MODEL=openai/gpt-4o-mini

# å¯é€‰é…ç½®
OPENAI_TIMEOUT_S=60          # API è¯·æ±‚è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰
OPENAI_MAX_TOOL_TURNS=8      # æœ€å¤§å·¥å…·è°ƒç”¨è½®æ•°

# ä»£ç†é…ç½®ï¼ˆå¯é€‰ï¼Œç”¨äºåŠ é€ŸAPIè¯·æ±‚ï¼‰
# æ ¼å¼: http://host:port æˆ– https://host:port
# ç¤ºä¾‹: HTTP_PROXY=http://127.0.0.1:7897
HTTP_PROXY=                  # HTTPä»£ç†åœ°å€
HTTPS_PROXY=                 # HTTPSä»£ç†åœ°å€
```

### æ”¯æŒçš„æ¨¡å‹

ç³»ç»Ÿæ”¯æŒä»¥ä¸‹æ¨¡å‹ï¼ˆéœ€è¦åœ¨ OpenRouter æˆ–å…¶ä»–å…¼å®¹ API ä¸­ä½¿ç”¨ï¼‰ï¼š

- `openai/gpt-4o-mini` - OpenAI GPT-4o Miniï¼ˆé»˜è®¤ï¼‰
- `anthropic/claude-haiku-4.5` - Anthropic Claude Haiku 4.5
- `google/gemini-2.5-flash` - Google Gemini 2.5 Flash

### è·¯å¾„å®‰å…¨é™åˆ¶

é»˜è®¤å…è®¸è®¿é—®çš„ç›®å½•ï¼š
- `~/` (ç”¨æˆ·ä¸»ç›®å½•)
- `~/Desktop`
- `~/Documents`
- `~/Downloads`

å¦‚éœ€ä¿®æ”¹å…è®¸çš„è·¯å¾„ï¼Œæ¨èé€šè¿‡ç¯å¢ƒå˜é‡æ³¨å…¥é¢å¤–ç™½åå•ï¼Œé¿å…ä¿®æ”¹ä»£ç ï¼š

- `AGENT_ALLOWED_ROOTS`ï¼šä½¿ç”¨ç³»ç»Ÿè·¯å¾„åˆ†éš”ç¬¦ï¼ˆmacOS/Linux ä¸º `:`ï¼‰åˆ†éš”å¤šä¸ªè·¯å¾„
- ç¤ºä¾‹ï¼š`AGENT_ALLOWED_ROOTS=/Users/your_username:/Users/your_username/Desktop`

è‹¥å¿…é¡»ä¿®æ”¹é»˜è®¤ç™½åå•ï¼Œå¯ç¼–è¾‘ `backend/agent/tools/validators.py` ä¸­çš„ `BASE_ALLOWED_ROOTS` åˆ—è¡¨ï¼š

```python
BASE_ALLOWED_ROOTS = [
    Path.home(),
    Path.home() / "Desktop",
    Path.home() / "Documents",
    Path.home() / "Downloads",
    # æ·»åŠ æ›´å¤šå…è®¸çš„è·¯å¾„
]
```

è·¯å¾„è§„èŒƒåŒ–æ”¯æŒå¸¸è§å˜é‡å±•å¼€ï¼Œä¾‹å¦‚ `~`ã€`$HOME`/`$USER`ã€ä»¥åŠ `$(whoami)`ï¼Œé¿å…å› å˜é‡æœªå±•å¼€å¯¼è‡´è·¯å¾„è¢«æ‹’ç»ã€‚

#### ç”¨æˆ·çº§è·¯å¾„ç™½åå•ï¼ˆå‰ç«¯é…ç½®ï¼‰

- å‰ç«¯æ”¯æŒç”¨æˆ·é…ç½®ä¸ªäººè·¯å¾„ç™½åå•ï¼Œåç«¯ä¼šæŒä¹…åŒ–åˆ° `backend_data/user_paths.json`
- è·¯å¾„æ ¡éªŒä¼šåˆå¹¶â€œé»˜è®¤ç™½åå• + ç¯å¢ƒå˜é‡ç™½åå• + ç”¨æˆ·ç™½åå•â€
- ç”¨æˆ·ç™½åå•åªæ¥å—å·²å­˜åœ¨çš„ç›®å½•è·¯å¾„ï¼Œä¸”ä¼šæ‹’ç»æ ¹ç›®å½• `/`

APIï¼š
- `GET /api/user/paths?user_id=...` è·å–ç”¨æˆ·ç™½åå•
- `POST /api/user/paths` ä¿å­˜ç”¨æˆ·ç™½åå•ï¼ˆ`{"user_id": "...", "paths": ["..."]}`ï¼‰

**Docker éƒ¨ç½²æ³¨æ„äº‹é¡¹**ï¼š
- Docker å®¹å™¨å†…å·²æŒ‚è½½ç”¨æˆ·ä¸»ç›®å½•ï¼ˆ`${HOME}:/host_home`ï¼‰ï¼Œå®¹å™¨å†… `HOME=/host_home`
- æ™ºèƒ½ä½“åˆ›å»ºçš„ `~/Documents`ã€`~/Desktop` ç­‰è·¯å¾„ä¼šæ˜ å°„åˆ°å®¿ä¸»æœºçš„ç”¨æˆ·ç›®å½•
- å¦‚æœæ–‡ä»¶æ‰¾ä¸åˆ°ï¼Œæ£€æŸ¥å®¹å™¨å†…è·¯å¾„ï¼š`docker exec macjarvis-backend ls -la /host_home/Documents`
- ç¡®ä¿å®¹å™¨æœ‰æƒé™è®¿é—®æŒ‚è½½çš„ç›®å½•

### ä»£ç†é…ç½®

ç³»ç»Ÿæ”¯æŒé€šè¿‡HTTP/HTTPSä»£ç†åŠ é€ŸAPIè¯·æ±‚ï¼Œç‰¹åˆ«é€‚åˆç½‘ç»œå—é™çš„ç¯å¢ƒã€‚æ ¹æ®æ€§èƒ½æµ‹è¯•ï¼Œä½¿ç”¨åˆé€‚çš„ä»£ç†å¯ä»¥å°†é¦–tokenå“åº”æ—¶é—´(TTFT)ä»3.8ç§’é™ä½åˆ°2.7ç§’ï¼Œæå‡çº¦29%çš„å“åº”é€Ÿåº¦ã€‚

#### æ–¹å¼ä¸€ï¼šç¯å¢ƒå˜é‡é…ç½®ï¼ˆå…¨å±€é»˜è®¤ï¼‰

åœ¨`.env`æ–‡ä»¶ä¸­é…ç½®å…¨å±€ä»£ç†ï¼Œæ‰€æœ‰ç”¨æˆ·é»˜è®¤ä½¿ç”¨ï¼š

```bash
# ä»£ç†é…ç½® (å¯é€‰)
HTTP_PROXY=http://127.0.0.1:7897
HTTPS_PROXY=http://127.0.0.1:7897
```

é…ç½®åéœ€è¦é‡å¯æœåŠ¡ï¼š
```bash
docker compose down
docker compose up -d --build
```

#### æ–¹å¼äºŒï¼šå‰ç«¯UIé…ç½®ï¼ˆç”¨æˆ·çº§åˆ«ï¼‰

æ¯ä¸ªç”¨æˆ·å¯ä»¥åœ¨å‰ç«¯ç•Œé¢ç‹¬ç«‹é…ç½®è‡ªå·±çš„ä»£ç†è®¾ç½®ï¼Œè¦†ç›–å…¨å±€é…ç½®ï¼š

1. æ‰“å¼€MacAgentå‰ç«¯ç•Œé¢
2. åœ¨å·¦ä¾§è¾¹æ æ‰¾åˆ°"ä»£ç†é…ç½® (å¯é€‰)"åŒºåŸŸ
3. è¾“å…¥ä»£ç†åœ°å€ï¼ˆæ ¼å¼: `http://host:port`ï¼‰
4. ç‚¹å‡»"ä¿å­˜ä»£ç†é…ç½®"æŒ‰é’®
5. é…ç½®ç«‹å³ç”Ÿæ•ˆï¼Œæ— éœ€é‡å¯æœåŠ¡

**ä»£ç†æ ¼å¼è¦æ±‚**ï¼š
- å¿…é¡»åŒ…å«åè®®å‰ç¼€: `http://` æˆ– `https://`
- æ ¼å¼: `protocol://host:port`
- âœ… æ­£ç¡®: `http://127.0.0.1:7897`
- âŒ é”™è¯¯: `127.0.0.1:7897`

**å¸¸è§ä»£ç†å·¥å…·é…ç½®ç¤ºä¾‹**ï¼š

Clash:
```bash
HTTP_PROXY=http://127.0.0.1:7897
HTTPS_PROXY=http://127.0.0.1:7897
```

V2Ray:
```bash
HTTP_PROXY=http://127.0.0.1:1080
HTTPS_PROXY=http://127.0.0.1:1080
```

**APIæ¥å£**ï¼š
- `GET /api/user/proxy?user_id=...` è·å–ç”¨æˆ·ä»£ç†é…ç½®
- `POST /api/user/proxy` è®¾ç½®ç”¨æˆ·ä»£ç†é…ç½®

**è¯¦ç»†æ–‡æ¡£**: æŸ¥çœ‹ `docs/proxy_configuration_20260128.md` äº†è§£æ›´å¤šä¿¡æ¯å’Œæ€§èƒ½æµ‹è¯•ç»“æœ

---

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å‰ç«¯ (React) â”‚
â”‚  Port: 5173 â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚ HTTP/SSE
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Nginx      â”‚
â”‚  Port: 80   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚ Proxy
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FastAPI     â”‚â”€â”€â”€â”€â”€â–¶â”‚ OpenAI API  â”‚
â”‚ Backend     â”‚      â”‚ (OpenRouter) â”‚
â”‚ Port: 8000  â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Agent Core â”‚
â”‚  + Tools    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ macOS Systemâ”‚
â”‚ Commands    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒç»„ä»¶

#### 1. Agent æ ¸å¿ƒ (`backend/agent/core/agent.py`)

- **æµå¼å¤„ç†**ï¼šæ”¯æŒ Server-Sent Events (SSE) æµå¼å“åº”
- **å·¥å…·è°ƒç”¨å¾ªç¯**ï¼šè‡ªåŠ¨å¤„ç†å¤šè½®å·¥å…·è°ƒç”¨ï¼Œç›´åˆ°è·å¾—æœ€ç»ˆç»“æœ
- **äº‹ä»¶ç³»ç»Ÿ**ï¼šç»Ÿä¸€çš„äº‹ä»¶ç±»å‹ï¼ˆcontentã€tool_startã€tool_resultï¼‰

#### 2. å·¥å…·ç³»ç»Ÿ (`backend/agent/tools/`)

- **å·¥å…·æ³¨å†Œè¡¨**ï¼šç»Ÿä¸€ç®¡ç†æ‰€æœ‰å¯ç”¨å·¥å…·
- **å·¥å…·æ‰§è¡Œå™¨**ï¼šå®‰å…¨çš„å‘½ä»¤æ‰§è¡Œï¼Œå¸¦è¶…æ—¶æ§åˆ¶
- **è·¯å¾„éªŒè¯å™¨**ï¼šç¡®ä¿æ–‡ä»¶æ“ä½œçš„å®‰å…¨æ€§

#### 3. API æœåŠ¡å™¨ (`backend/server/app.py`)

- **FastAPI è·¯ç”±**ï¼šRESTful API è®¾è®¡
- **SSE æµå¼å“åº”**ï¼šå®æ—¶æ¨é€ AI å›å¤å’Œå·¥å…·è°ƒç”¨ç»“æœ
- **é”™è¯¯å¤„ç†**ï¼šç»Ÿä¸€çš„å¼‚å¸¸å¤„ç†å’Œé”™è¯¯æ ¼å¼

#### 4. å‰ç«¯åº”ç”¨ (`frontend/src/`)

- **React Hooks**ï¼šä½¿ç”¨ç°ä»£ React Hooks ç®¡ç†çŠ¶æ€
- **SSE å®¢æˆ·ç«¯**ï¼šä½¿ç”¨ `@microsoft/fetch-event-source` å¤„ç†æµå¼æ•°æ®
- **Markdown æ¸²æŸ“**ï¼šä½¿ç”¨ `react-markdown` æ¸²æŸ“ AI å›å¤

### æ•°æ®æµ

1. **ç”¨æˆ·è¾“å…¥** â†’ å‰ç«¯å‘é€ POST è¯·æ±‚åˆ° `/api/chat`
2. **åç«¯å¤„ç†** â†’ Agent æ¥æ”¶æ¶ˆæ¯ï¼Œè°ƒç”¨ OpenAI API
3. **æµå¼å“åº”** â†’ é€šè¿‡ SSE å®æ—¶æ¨é€å†…å®¹å—å’Œå·¥å…·è°ƒç”¨äº‹ä»¶
4. **å·¥å…·æ‰§è¡Œ** â†’ Agent è°ƒç”¨å·¥å…·ï¼Œæ‰§è¡Œç³»ç»Ÿå‘½ä»¤
5. **ç»“æœè¿”å›** â†’ å·¥å…·ç»“æœé€šè¿‡ SSE è¿”å›ï¼ŒAgent ç»§ç»­å¤„ç†
6. **å‰ç«¯æ¸²æŸ“** â†’ å®æ—¶æ›´æ–° UIï¼Œæ˜¾ç¤º AI å›å¤å’Œå·¥å…·è°ƒç”¨çŠ¶æ€

---

## ğŸ“¡ API æ–‡æ¡£

### POST /api/chat

å‘é€èŠå¤©æ¶ˆæ¯å¹¶è·å–æµå¼å“åº”ã€‚

**è¯·æ±‚ä½“**:
```json
{
  "message": "æŸ¥çœ‹ç³»ç»Ÿä¿¡æ¯",
  "model": "openai/gpt-4o-mini",  // å¯é€‰ï¼Œä¸æŒ‡å®šåˆ™ä½¿ç”¨é»˜è®¤æ¨¡å‹
  "attachments": [
    {
      "file_id": "ä¸Šä¼ æ¥å£è¿”å›çš„æ–‡ä»¶ID",
      "filename": "report.pdf",
      "content_type": "application/pdf"
    }
  ]
}
```

**å“åº”æ ¼å¼** (Server-Sent Events):

```
event: content
data: "ç³»ç»Ÿä¿¡æ¯å¦‚ä¸‹..."

event: tool_start
data: {"tool_call_id": "xxx", "name": "system_info", "args": {}}

event: tool_result
data: {"tool_call_id": "xxx", "result": {"ok": true, "data": {...}}}

event: error
data: "é”™è¯¯ä¿¡æ¯"
```

**äº‹ä»¶ç±»å‹**:

- `content`: AI å›å¤çš„æ–‡æœ¬å†…å®¹ï¼ˆæµå¼ï¼‰
- `tool_start`: å·¥å…·å¼€å§‹è°ƒç”¨
- `tool_result`: å·¥å…·æ‰§è¡Œç»“æœ
- `error`: é”™è¯¯ä¿¡æ¯

### POST /api/files

ä¸Šä¼ é™„ä»¶æ–‡ä»¶ï¼ˆå›¾ç‰‡/æ–‡æ¡£ï¼‰å¹¶è¿”å›æ–‡ä»¶æ ‡è¯†ã€‚

**è¯·æ±‚**:
- `multipart/form-data`
- å­—æ®µåï¼š`file`

**å“åº”**:
```json
{
  "id": "file_id",
  "filename": "report.pdf",
  "content_type": "application/pdf",
  "path": "/app/backend_data/uploads/...",
  "size": 12345,
  "created_at": 1730000000000
}
```

### GET /health

å¥åº·æ£€æŸ¥ç«¯ç‚¹ï¼Œè¿”å›æœåŠ¡çŠ¶æ€ã€‚

**å“åº”**:
```json
{
  "status": "ok",
  "service": "macjarvis-backend"
}
```

### GET /docs

FastAPI è‡ªåŠ¨ç”Ÿæˆçš„ API æ–‡æ¡£ï¼ˆSwagger UIï¼‰ã€‚

---

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°å·¥å…·

1. åœ¨ `backend/agent/tools/mac_tools.py` ä¸­åˆ›å»ºå·¥å…·ç±»ï¼š

```python
@dataclass
class MyNewTool:
    name: str = "my_new_tool"
    description: str = "å·¥å…·æè¿°"
    parameters: dict[str, Any] = None
    
    def __post_init__(self):
        if self.parameters is None:
            self.parameters = {
                "type": "object",
                "properties": {
                    "param1": {
                        "type": "string",
                        "description": "å‚æ•°1çš„æè¿°"
                    }
                },
                "required": ["param1"]
            }
    
    def execute(self, args: dict[str, Any]) -> dict[str, Any]:
        # å®ç°å·¥å…·é€»è¾‘
        param1 = args.get("param1")
        # ... æ‰§è¡Œæ“ä½œ ...
        return {"ok": True, "data": "ç»“æœ"}
```

2. åœ¨ `build_default_tools()` å‡½æ•°ä¸­æ³¨å†Œå·¥å…·ï¼š

```python
def build_default_tools() -> list[Any]:
    return [
        # ... å…¶ä»–å·¥å…·
        MyNewTool(),
    ]
```

3. å·¥å…·è¿”å›å€¼æ ¼å¼ï¼š

```python
# æˆåŠŸ
{"ok": True, "data": {...}}

# å¤±è´¥
{"ok": False, "error": "é”™è¯¯æè¿°"}
```

### æµ‹è¯•

åç«¯ API æµ‹è¯•ç›®å½•ç»“æ„ï¼š

```
backend/tests/
â”œâ”€â”€ conftest.py
â””â”€â”€ api/
    â”œâ”€â”€ test_health.py
    â”œâ”€â”€ test_sessions.py
    â””â”€â”€ test_chat.py
```

è¿è¡Œæµ‹è¯•ï¼š

```bash
pytest backend/tests
```

### æ·»åŠ æ–°æ¨¡å‹

åœ¨ `backend/agent/core/config.py` ä¸­çš„ `ALLOWED_MODELS` åˆ—è¡¨æ·»åŠ æ–°æ¨¡å‹ï¼š

```python
ALLOWED_MODELS = [
    # ... ç°æœ‰æ¨¡å‹
    "new-provider/new-model",
]
```

### ä¿®æ”¹ç³»ç»Ÿæç¤ºè¯

ç¼–è¾‘ `backend/server/app.py` ä¸­çš„ `SYSTEM_PROMPT` å˜é‡ï¼š

```python
SYSTEM_PROMPT = """ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„ macOS æ™ºèƒ½åŠ©æ‰‹...
ä½ çš„è‡ªå®šä¹‰æç¤ºè¯...
"""
```

### å‰ç«¯å¼€å‘

```bash
cd frontend
npm run dev      # å¼€å‘æ¨¡å¼ï¼ˆçƒ­é‡è½½ï¼‰
npm run build    # ç”Ÿäº§æ„å»º
npm run lint     # ä»£ç æ£€æŸ¥
```

### ä»£ç è§„èŒƒ

- **Python**: éµå¾ª PEP 8 è§„èŒƒï¼Œä½¿ç”¨ç±»å‹æç¤º
- **TypeScript**: ä½¿ç”¨ä¸¥æ ¼çš„ç±»å‹æ£€æŸ¥ï¼Œéµå¾ª ESLint è§„åˆ™
- **æäº¤ä¿¡æ¯**: ä½¿ç”¨æ¸…æ™°çš„æäº¤ä¿¡æ¯ï¼Œéµå¾ª Conventional Commits

---

## ğŸ³ éƒ¨ç½²æŒ‡å—

### Docker Compose éƒ¨ç½²ï¼ˆæ¨èï¼‰

1. **å‡†å¤‡ç¯å¢ƒå˜é‡æ–‡ä»¶**ï¼š

```bash
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶
```

2. **å¯åŠ¨æœåŠ¡**ï¼š

```bash
docker compose -f docker-compose.yml up -d --build
```

3. **æŸ¥çœ‹æ—¥å¿—**ï¼š

```bash
# æŸ¥çœ‹æ‰€æœ‰æœåŠ¡æ—¥å¿—
docker compose -f docker-compose.yml logs -f

# æŸ¥çœ‹ç‰¹å®šæœåŠ¡æ—¥å¿—
docker compose -f docker-compose.yml logs -f backend
docker compose -f docker-compose.yml logs -f frontend
```

4. **åœæ­¢æœåŠ¡**ï¼š

```bash
docker compose -f docker-compose.yml down
```

5. **æ›´æ–°æœåŠ¡**ï¼š

```bash
# æ‹‰å–æœ€æ–°ä»£ç 
git pull

# é‡æ–°æ„å»ºå¹¶å¯åŠ¨
docker compose -f docker-compose.yml up -d --build
```

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²å»ºè®®

1. **ä½¿ç”¨ HTTPS**ï¼šé…ç½® SSL è¯ä¹¦ï¼Œä½¿ç”¨ Nginx åå‘ä»£ç†
2. **ç¯å¢ƒå˜é‡ç®¡ç†**ï¼šä½¿ç”¨ Docker secrets æˆ–ç¯å¢ƒå˜é‡ç®¡ç†æœåŠ¡
3. **æ—¥å¿—ç®¡ç†**ï¼šé…ç½®æ—¥å¿—è½®è½¬å’Œé›†ä¸­æ—¥å¿—æ”¶é›†
4. **ç›‘æ§å‘Šè­¦**ï¼šé…ç½®å¥åº·æ£€æŸ¥å’Œç›‘æ§å‘Šè­¦
5. **å¤‡ä»½ç­–ç•¥**ï¼šå®šæœŸå¤‡ä»½é…ç½®å’Œæ•°æ®

---

## ğŸ”§ æ•…éšœæ’æŸ¥

### åç«¯æ— æ³•å¯åŠ¨

1. **æ£€æŸ¥ Python ç‰ˆæœ¬**ï¼š
   ```bash
   python3 --version  # éœ€è¦ 3.12+
   ```

2. **æ£€æŸ¥ä¾èµ–å®‰è£…**ï¼š
   ```bash
   pip list | grep fastapi
   ```

3. **æ£€æŸ¥ç¯å¢ƒå˜é‡**ï¼š
   ```bash
   # ç¡®ä¿ .env æ–‡ä»¶å­˜åœ¨ä¸” OPENAI_API_KEY å·²è®¾ç½®
   cat .env
   ```

4. **æŸ¥çœ‹æ—¥å¿—**ï¼š
   ```bash
   # æŸ¥çœ‹æ§åˆ¶å°è¾“å‡ºçš„é”™è¯¯ä¿¡æ¯
   python app.py
   ```

### å‰ç«¯æ— æ³•è¿æ¥åç«¯

1. **ç¡®è®¤åç«¯æœåŠ¡è¿è¡Œ**ï¼š
   ```bash
   # æœ¬åœ°å¼€å‘
   curl http://localhost:8000/health
   # Docker éƒ¨ç½²
   curl http://localhost:8001/health
   ```

2. **æ£€æŸ¥ CORS é…ç½®**ï¼šåç«¯å·²é…ç½®å…è®¸æ‰€æœ‰æ¥æºï¼Œå¦‚ä»æœ‰é—®é¢˜æ£€æŸ¥ç½‘ç»œè¯·æ±‚

3. **æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°**ï¼šæŸ¥çœ‹ç½‘ç»œè¯·æ±‚é”™è¯¯ä¿¡æ¯

4. **æ£€æŸ¥ API URL é…ç½®**ï¼š
   ```bash
   # å‰ç«¯ä½¿ç”¨ç›¸å¯¹è·¯å¾„ï¼Œç”± nginx ä»£ç†
   # ç¡®ä¿ nginx.conf é…ç½®æ­£ç¡®
   ```

### Docker å®¹å™¨æ— æ³•å¯åŠ¨

1. **æ£€æŸ¥ Docker æœåŠ¡çŠ¶æ€**ï¼š
   ```bash
   docker ps
   docker compose -f docker-compose.yml ps
   ```

2. **æŸ¥çœ‹å®¹å™¨æ—¥å¿—**ï¼š
   ```bash
   docker compose -f docker-compose.yml logs
   ```

3. **æ£€æŸ¥ç¯å¢ƒå˜é‡æ–‡ä»¶**ï¼š
   ```bash
   # ç¡®ä¿ .env æ–‡ä»¶å­˜åœ¨ä¸”æ ¼å¼æ­£ç¡®
   cat .env
   ```

4. **æ£€æŸ¥ç«¯å£å ç”¨**ï¼š
   ```bash
   # macOS/Linux
   lsof -i :8000
   lsof -i :8001
   lsof -i :8080
   
   # æˆ–ä½¿ç”¨ netstat
   netstat -an | grep 8000
   netstat -an | grep 8001
   ```

### API è¯·æ±‚å¤±è´¥

1. **æ£€æŸ¥ API Key**ï¼š
   ```bash
   # ç¡®ä¿ OPENAI_API_KEY æ­£ç¡®è®¾ç½®
   echo $OPENAI_API_KEY
   ```

2. **æµ‹è¯• API è¿æ¥**ï¼š
   ```bash
   # æœ¬åœ°å¼€å‘
   curl -X POST http://localhost:8000/api/chat \
     -H "Content-Type: application/json" \
     -d '{"message": "test"}'

   # Docker éƒ¨ç½²
   curl -X POST http://localhost:8001/api/chat \
     -H "Content-Type: application/json" \
     -d '{"message": "test"}'
   ```

3. **æŸ¥çœ‹è¯¦ç»†é”™è¯¯**ï¼š
   - æ£€æŸ¥åç«¯æ—¥å¿—
   - æ£€æŸ¥æµè§ˆå™¨ç½‘ç»œè¯·æ±‚è¯¦æƒ…

---

## ğŸ”’ å®‰å…¨æ³¨æ„äº‹é¡¹

âš ï¸ **é‡è¦å®‰å…¨æç¤º**ï¼š

1. **API Key å®‰å…¨**ï¼š
   - ä¸è¦å°† `.env` æ–‡ä»¶æäº¤åˆ° Git ä»“åº“
   - ä½¿ç”¨ç¯å¢ƒå˜é‡æˆ–å¯†é’¥ç®¡ç†æœåŠ¡å­˜å‚¨æ•æ„Ÿä¿¡æ¯
   - å®šæœŸè½®æ¢ API Key

2. **è·¯å¾„é™åˆ¶**ï¼š
   - ç³»ç»Ÿå·²é™åˆ¶æ–‡ä»¶è®¿é—®è·¯å¾„ï¼Œè¯·å‹¿éšæ„æ”¾å®½é™åˆ¶
   - ç”Ÿäº§ç¯å¢ƒä¸­å»ºè®®è¿›ä¸€æ­¥é™åˆ¶å·¥å…·æƒé™

3. **å‘½ä»¤æ‰§è¡Œ**ï¼š
   - å·¥å…·ä¼šæ‰§è¡Œç³»ç»Ÿå‘½ä»¤ï¼Œè¯·è°¨æ…ä½¿ç”¨
   - ä¸è¦åœ¨ç”Ÿäº§ç¯å¢ƒä¸­æ‰§è¡Œå±é™©æ“ä½œ

4. **ç½‘ç»œå®‰å…¨**ï¼š
   - ç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨ HTTPS
   - é…ç½®é˜²ç«å¢™è§„åˆ™ï¼Œé™åˆ¶è®¿é—®æ¥æº

5. **è¾“å…¥éªŒè¯**ï¼š
   - æ‰€æœ‰ç”¨æˆ·è¾“å…¥éƒ½ç»è¿‡éªŒè¯
   - æ–‡ä»¶å¤§å°å’Œè·¯å¾„éƒ½æœ‰ä¸¥æ ¼é™åˆ¶

6. **æ—¥å¿—å®‰å…¨**ï¼š
   - é¿å…åœ¨æ—¥å¿—ä¸­è®°å½•æ•æ„Ÿä¿¡æ¯
   - å®šæœŸæ¸…ç†æ—¥å¿—æ–‡ä»¶

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

### è´¡çŒ®æµç¨‹

1. **Fork æœ¬é¡¹ç›®**
2. **åˆ›å»ºç‰¹æ€§åˆ†æ”¯**ï¼š
   ```bash
   git checkout -b feature/AmazingFeature
   ```
3. **æäº¤æ›´æ”¹**ï¼š
   ```bash
   git commit -m 'Add some AmazingFeature'
   ```
4. **æ¨é€åˆ°åˆ†æ”¯**ï¼š
   ```bash
   git push origin feature/AmazingFeature
   ```
5. **å¼€å¯ Pull Request**

### ä»£ç è§„èŒƒ

- éµå¾ªé¡¹ç›®çš„ä»£ç é£æ ¼å’Œè§„èŒƒ
- æ·»åŠ å¿…è¦çš„æ³¨é‡Šå’Œæ–‡æ¡£
- ç¡®ä¿ä»£ç é€šè¿‡æµ‹è¯•
- æ›´æ–°ç›¸å…³æ–‡æ¡£

### æŠ¥å‘Šé—®é¢˜

æäº¤ Issue æ—¶ï¼Œè¯·åŒ…å«ï¼š
- é—®é¢˜æè¿°
- å¤ç°æ­¥éª¤
- é¢„æœŸè¡Œä¸º
- å®é™…è¡Œä¸º
- ç¯å¢ƒä¿¡æ¯ï¼ˆOSã€Python ç‰ˆæœ¬ç­‰ï¼‰

---

## ğŸ“ æ›´æ–°æ—¥å¿—

### v1.0.0 (2026-01-26)

#### âœ¨ æ–°åŠŸèƒ½
- åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- æ”¯æŒå¤šæ¨¡å‹åˆ‡æ¢ï¼ˆOpenAIã€Anthropicã€Googleï¼‰
- ä¸°å¯Œçš„ macOS ç³»ç»Ÿç®¡ç†å·¥å…·ï¼ˆ20+ å·¥å…·ï¼‰
- æµå¼å“åº”å’Œå®æ—¶å·¥å…·è°ƒç”¨æ˜¾ç¤º
- Docker å®¹å™¨åŒ–éƒ¨ç½²æ”¯æŒ
- è·¯å¾„è®¿é—®å®‰å…¨é™åˆ¶
- å®Œæ•´çš„æ–‡æ¡£å’Œç¤ºä¾‹

#### ğŸ› ï¸ æŠ€æœ¯ç‰¹æ€§
- FastAPI åç«¯ï¼Œæ”¯æŒ SSE æµå¼å“åº”
- React 19 + TypeScript å‰ç«¯
- å·¥å…·åŒ–æ¶æ„ï¼Œæ˜“äºæ‰©å±•
- å®Œå–„çš„é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•

#### ğŸ”’ å®‰å…¨ç‰¹æ€§
- è·¯å¾„è®¿é—®é™åˆ¶
- æ–‡ä»¶å¤§å°é™åˆ¶
- å‘½ä»¤æ‰§è¡Œè¶…æ—¶æ§åˆ¶
- è¾“å…¥éªŒè¯å’Œé”™è¯¯å¤„ç†

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

---

## ğŸ“® è”ç³»æ–¹å¼

- **GitHub**: [JNUZXF/MacJarvis](https://github.com/JNUZXF/MacJarvis)
- **Issues**: [GitHub Issues](https://github.com/JNUZXF/MacJarvis/issues)
- **Pull Requests**: [GitHub Pull Requests](https://github.com/JNUZXF/MacJarvis/pulls)

---

## ğŸ™ è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹å¼€æºé¡¹ç›®çš„æ”¯æŒï¼š

- [FastAPI](https://fastapi.tiangolo.com/) - ç°ä»£ã€å¿«é€Ÿçš„ Web æ¡†æ¶
- [React](https://react.dev/) - ç”¨æˆ·ç•Œé¢åº“
- [OpenRouter](https://openrouter.ai/) - ç»Ÿä¸€çš„ AI API æ¥å£
- [Tailwind CSS](https://tailwindcss.com/) - å®ç”¨ä¼˜å…ˆçš„ CSS æ¡†æ¶

---

<div align="center">

**Made with â¤ï¸ by JNUZXF**

â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ª Starï¼

</div>
